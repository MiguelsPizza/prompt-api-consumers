[{"sql":["CREATE TABLE \"conversation_messages\" (\n\t\"id\" uuid PRIMARY KEY NOT NULL,\n\t\"conversation_id\" uuid NOT NULL,\n\t\"position\" integer NOT NULL,\n\t\"role\" text NOT NULL,\n\t\"content\" text NOT NULL,\n\t\"temperature_at_creation\" real NOT NULL,\n\t\"top_k_at_creation\" real NOT NULL,\n\t\"user_id\" uuid NOT NULL,\n\t\"created_at\" timestamp DEFAULT now() NOT NULL,\n\t\"updated_at\" timestamp DEFAULT now() NOT NULL\n);\n","\nCREATE TABLE \"conversations\" (\n\t\"id\" uuid PRIMARY KEY NOT NULL,\n\t\"name\" text NOT NULL,\n\t\"conversation_summary\" text,\n\t\"system_prompt\" text DEFAULT '' NOT NULL,\n\t\"top_k\" real NOT NULL,\n\t\"temperature\" real NOT NULL,\n\t\"user_id\" uuid NOT NULL,\n\t\"created_at\" timestamp DEFAULT now() NOT NULL,\n\t\"updated_at\" timestamp DEFAULT now() NOT NULL\n);\n","\nALTER TABLE \"conversation_messages\" ADD CONSTRAINT \"conversation_messages_conversation_id_conversations_id_fk\" FOREIGN KEY (\"conversation_id\") REFERENCES \"public\".\"conversations\"(\"id\") ON DELETE cascade ON UPDATE no action;","\nALTER TABLE \"conversation_messages\" ADD CONSTRAINT \"conversation_messages_user_id_users_id_fk\" FOREIGN KEY (\"user_id\") REFERENCES \"auth\".\"users\"(\"id\") ON DELETE cascade ON UPDATE no action;","\nALTER TABLE \"conversations\" ADD CONSTRAINT \"conversations_user_id_users_id_fk\" FOREIGN KEY (\"user_id\") REFERENCES \"auth\".\"users\"(\"id\") ON DELETE cascade ON UPDATE no action;","\nCREATE INDEX \"idx_messages_conversation\" ON \"conversation_messages\" USING btree (\"conversation_id\");","\nCREATE INDEX \"idx_messages_position\" ON \"conversation_messages\" USING btree (\"position\");","\nCREATE INDEX \"idx_messages_conv_position\" ON \"conversation_messages\" USING btree (\"conversation_id\",\"position\");","\nCREATE INDEX \"idx_messages_created\" ON \"conversation_messages\" USING btree (\"created_at\");","\nCREATE INDEX \"idx_messages_user_created\" ON \"conversation_messages\" USING btree (\"user_id\",\"created_at\");","\nCREATE INDEX \"idx_conversations_user\" ON \"conversations\" USING btree (\"user_id\");","\nCREATE INDEX \"idx_conversations_updated\" ON \"conversations\" USING btree (\"updated_at\");","\nCREATE INDEX \"idx_conversations_user_updated\" ON \"conversations\" USING btree (\"user_id\",\"updated_at\");"],"bps":true,"folderMillis":1734577110350,"hash":"2454018765f78b00e5256e4da4f8ab4f595eaa866df715f57a7b76b40536ae4b"},{"sql":["CREATE TABLE \"auth\".\"users\" (\n\t\"id\" uuid PRIMARY KEY NOT NULL,\n\t\"email\" varchar(255),\n\t\"phone\" text,\n\t\"email_confirmed_at\" timestamp with time zone,\n\t\"phone_confirmed_at\" timestamp with time zone,\n\t\"last_sign_in_at\" timestamp with time zone,\n\t\"created_at\" timestamp with time zone,\n\t\"updated_at\" timestamp with time zone,\n\tCONSTRAINT \"users_phone_unique\" UNIQUE(\"phone\")\n);\n"],"bps":true,"folderMillis":1734577393228,"hash":"cc8dd83e723a99c22d619268cfd5f2456843aaaf6efc9c9924816b4e9b5d16cf"},{"sql":["DROP TABLE \"auth\".\"users\" CASCADE;"],"bps":true,"folderMillis":1734577700622,"hash":"3024ea45d63a5a4df04ec851288c301751121d0bfd9f48fb951090b6d774727b"},{"sql":["CREATE TABLE \"auth\".\"users\" (\n\t\"id\" uuid PRIMARY KEY NOT NULL,\n\t\"email\" varchar(255),\n\t\"phone\" text,\n\t\"email_confirmed_at\" timestamp with time zone,\n\t\"phone_confirmed_at\" timestamp with time zone,\n\t\"last_sign_in_at\" timestamp with time zone,\n\t\"created_at\" timestamp with time zone,\n\t\"updated_at\" timestamp with time zone,\n\tCONSTRAINT \"users_phone_unique\" UNIQUE(\"phone\")\n);\n"],"bps":true,"folderMillis":1734577983315,"hash":"cc8dd83e723a99c22d619268cfd5f2456843aaaf6efc9c9924816b4e9b5d16cf"},{"sql":["CREATE TABLE \"users\" (\n\t\"id\" uuid PRIMARY KEY NOT NULL,\n\t\"email\" text,\n\t\"phone\" text,\n\t\"email_confirmed_at\" timestamp,\n\t\"phone_confirmed_at\" timestamp,\n\t\"last_sign_in_at\" timestamp,\n\t\"created_at\" timestamp DEFAULT now() NOT NULL,\n\t\"updated_at\" timestamp DEFAULT now() NOT NULL\n);\n","\nALTER TABLE \"auth\".\"users\" DISABLE ROW LEVEL SECURITY;","\nDROP TABLE \"auth\".\"users\" CASCADE;","\nALTER TABLE \"conversation_messages\" DROP CONSTRAINT \"conversation_messages_user_id_users_id_fk\";\n","\nALTER TABLE \"conversations\" DROP CONSTRAINT \"conversations_user_id_users_id_fk\";\n","\nALTER TABLE \"conversation_messages\" ADD CONSTRAINT \"conversation_messages_user_id_users_id_fk\" FOREIGN KEY (\"user_id\") REFERENCES \"public\".\"users\"(\"id\") ON DELETE cascade ON UPDATE no action;","\nALTER TABLE \"conversations\" ADD CONSTRAINT \"conversations_user_id_users_id_fk\" FOREIGN KEY (\"user_id\") REFERENCES \"public\".\"users\"(\"id\") ON DELETE cascade ON UPDATE no action;"],"bps":true,"folderMillis":1734578295612,"hash":"3d725259d3732668e3b938ec80d01c0ebdd44c84c169f5a0d9e02f8f9d7147a6"},{"sql":["ALTER TABLE \"users\" DISABLE ROW LEVEL SECURITY;","\nDROP TABLE \"users\" CASCADE;","\nALTER TABLE \"conversation_messages\" DROP CONSTRAINT \"conversation_messages_user_id_users_id_fk\";\n","\nALTER TABLE \"conversations\" DROP CONSTRAINT \"conversations_user_id_users_id_fk\";\n","\nDROP INDEX \"idx_messages_user_created\";","\nDROP INDEX \"idx_conversations_user\";","\nDROP INDEX \"idx_conversations_user_updated\";"],"bps":true,"folderMillis":1734578424990,"hash":"d070dab02ef0fb57e6e8ae42919d42aed124c0f8474711f8a92336c3d28d182f"},{"sql":["ALTER TABLE \"conversation_messages\" ALTER COLUMN \"created_at\" SET DATA TYPE timestamp with time zone;","\nALTER TABLE \"conversation_messages\" ALTER COLUMN \"created_at\" SET DEFAULT (now() AT TIME ZONE 'utc'::text);","\nALTER TABLE \"conversation_messages\" ALTER COLUMN \"updated_at\" SET DATA TYPE timestamp with time zone;","\nALTER TABLE \"conversation_messages\" ALTER COLUMN \"updated_at\" SET DEFAULT (now() AT TIME ZONE 'utc'::text);","\nALTER TABLE \"conversations\" ALTER COLUMN \"created_at\" SET DATA TYPE timestamp with time zone;","\nALTER TABLE \"conversations\" ALTER COLUMN \"created_at\" SET DEFAULT (now() AT TIME ZONE 'utc'::text);","\nALTER TABLE \"conversations\" ALTER COLUMN \"updated_at\" SET DATA TYPE timestamp with time zone;","\nALTER TABLE \"conversations\" ALTER COLUMN \"updated_at\" SET DEFAULT (now() AT TIME ZONE 'utc'::text);"],"bps":true,"folderMillis":1734578949302,"hash":"3178ea21a1ada03fb75a78273d49a193ab49a7230d47fa2e11347df6cee8984b"}]