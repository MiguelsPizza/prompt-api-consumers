[
  {
    "sql": [
      "CREATE TABLE \"conversation_messages\" (\n\t\"id\" uuid PRIMARY KEY NOT NULL,\n\t\"conversation_id\" uuid NOT NULL,\n\t\"position\" integer NOT NULL,\n\t\"role\" text NOT NULL,\n\t\"content\" text NOT NULL,\n\t\"temperature_at_creation\" real NOT NULL,\n\t\"top_k_at_creation\" real NOT NULL,\n\t\"user_id\" uuid NOT NULL,\n\t\"created_at\" timestamp NOT NULL,\n\t\"updated_at\" timestamp NOT NULL\n);\n",
      "\nCREATE TABLE \"conversations\" (\n\t\"id\" uuid PRIMARY KEY NOT NULL,\n\t\"name\" text NOT NULL,\n\t\"conversation_summary\" text,\n\t\"system_prompt\" text DEFAULT '' NOT NULL,\n\t\"top_k\" real NOT NULL,\n\t\"temperature\" real NOT NULL,\n\t\"user_id\" uuid NOT NULL,\n\t\"created_at\" timestamp NOT NULL,\n\t\"updated_at\" timestamp NOT NULL\n);\n",
      "\nALTER TABLE \"conversation_messages\" ADD CONSTRAINT \"conversation_messages_conversation_id_conversations_id_fk\" FOREIGN KEY (\"conversation_id\") REFERENCES \"public\".\"conversations\"(\"id\") ON DELETE cascade ON UPDATE no action;",
      "\nALTER TABLE \"conversation_messages\" ADD CONSTRAINT \"conversation_messages_user_id_users_id_fk\" FOREIGN KEY (\"user_id\") REFERENCES \"auth\".\"users\"(\"id\") ON DELETE cascade ON UPDATE no action;",
      "\nALTER TABLE \"conversations\" ADD CONSTRAINT \"conversations_user_id_users_id_fk\" FOREIGN KEY (\"user_id\") REFERENCES \"auth\".\"users\"(\"id\") ON DELETE cascade ON UPDATE no action;",
      "\nCREATE INDEX \"idx_messages_conversation\" ON \"conversation_messages\" USING btree (\"conversation_id\");",
      "\nCREATE INDEX \"idx_messages_position\" ON \"conversation_messages\" USING btree (\"position\");",
      "\nCREATE INDEX \"idx_messages_conv_position\" ON \"conversation_messages\" USING btree (\"conversation_id\",\"position\");",
      "\nCREATE INDEX \"idx_messages_created\" ON \"conversation_messages\" USING btree (\"created_at\");",
      "\nCREATE INDEX \"idx_messages_user_created\" ON \"conversation_messages\" USING btree (\"user_id\",\"created_at\");",
      "\nCREATE INDEX \"idx_conversations_user\" ON \"conversations\" USING btree (\"user_id\");",
      "\nCREATE INDEX \"idx_conversations_updated\" ON \"conversations\" USING btree (\"updated_at\");",
      "\nCREATE INDEX \"idx_conversations_user_updated\" ON \"conversations\" USING btree (\"user_id\",\"updated_at\");"
    ],
    "bps": true,
    "folderMillis": 1734294060952,
    "hash": "65bdb6aa992af2728f6b2b4346eced32ecf3269932d4e4e0bbbe2e8bdbac5720"
  },
  {
    "sql": [
      "ALTER TABLE \"conversation_messages\" ALTER COLUMN \"created_at\" SET DEFAULT '2024-12-15T20:25:11.110Z';",
      "\nALTER TABLE \"conversation_messages\" ALTER COLUMN \"updated_at\" SET DEFAULT '2024-12-15T20:25:11.110Z';",
      "\nALTER TABLE \"conversations\" ALTER COLUMN \"created_at\" SET DEFAULT '2024-12-15T20:25:11.109Z';",
      "\nALTER TABLE \"conversations\" ALTER COLUMN \"updated_at\" SET DEFAULT '2024-12-15T20:25:11.110Z';"
    ],
    "bps": true,
    "folderMillis": 1734294311120,
    "hash": "e9769237fa4629930cfa157cdfdc05d924ccb77530069303606e29d25ba8f2b4"
  },
  {
    "sql": [
      "ALTER TABLE \"conversation_messages\" ALTER COLUMN \"created_at\" SET DEFAULT '2024-12-15T23:40:54.289Z';",
      "\nALTER TABLE \"conversation_messages\" ALTER COLUMN \"updated_at\" SET DEFAULT '2024-12-15T23:40:54.289Z';",
      "\nALTER TABLE \"conversations\" ALTER COLUMN \"created_at\" SET DEFAULT '2024-12-15T23:40:54.288Z';",
      "\nALTER TABLE \"conversations\" ALTER COLUMN \"updated_at\" SET DEFAULT '2024-12-15T23:40:54.288Z';"
    ],
    "bps": true,
    "folderMillis": 1734306054297,
    "hash": "1634c5def3ef3ac6621f9728eb90c08e93b6a37d1b56db26d9a2a519f63de996"
  }
]
